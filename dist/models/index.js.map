{"version":3,"sources":["../../src/models/index.js"],"sourcesContent":["'use strict';\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\nconst Sequelize = require('sequelize');\r\nconst process = require('process');\r\nconst basename = path.basename(__filename);\r\nconst env = process.env.NODE_ENV || 'development';\r\nconst config = require(__dirname + '/../config/database.json')[env];\r\nconst db = {};\r\n\r\nlet sequelize;\r\nif (config.use_env_variable) {\r\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\r\n} else {\r\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\r\n}\r\n\r\nfs.readdirSync(__dirname)\r\n  .filter(file => {\r\n    return file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js';\r\n  })\r\n  .forEach(file => {\r\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\r\n    db[model.name] = model;\r\n  });\r\n\r\nObject.keys(db).forEach(modelName => {\r\n  if (db[modelName].associate) {\r\n    db[modelName].associate(db);\r\n  }\r\n});\r\n\r\ndb.sequelize = sequelize;\r\ndb.Sequelize = Sequelize;\r\n\r\nmodule.exports = db;\r\n"],"names":["fs","require","path","Sequelize","process","basename","__filename","env","NODE_ENV","config","__dirname","db","sequelize","use_env_variable","database","username","password","readdirSync","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","module","exports"],"mappings":"AAAA;AAEA,MAAMA,KAAKC,QAAQ;AACnB,MAAMC,OAAOD,QAAQ;AACrB,MAAME,YAAYF,QAAQ;AAC1B,MAAMG,UAAUH,QAAQ;AACxB,MAAMI,WAAWH,KAAKG,QAAQ,CAACC;AAC/B,MAAMC,MAAMH,QAAQG,GAAG,CAACC,QAAQ,IAAI;AACpC,MAAMC,SAASR,QAAQS,YAAY,2BAA2B,CAACH,IAAI;AACnE,MAAMI,KAAK,CAAC;AAEZ,IAAIC;AACJ,IAAIH,OAAOI,gBAAgB,EAAE;IAC3BD,YAAY,IAAIT,UAAUC,QAAQG,GAAG,CAACE,OAAOI,gBAAgB,CAAC,EAAEJ;AAClE,OAAO;IACLG,YAAY,IAAIT,UAAUM,OAAOK,QAAQ,EAAEL,OAAOM,QAAQ,EAAEN,OAAOO,QAAQ,EAAEP;AAC/E,CAAC;AAEDT,GAAGiB,WAAW,CAACP,WACZQ,MAAM,CAACC,CAAAA,OAAQ;IACd,OAAOA,KAAKC,OAAO,CAAC,SAAS,KAAKD,SAASd,YAAYc,KAAKE,KAAK,CAAC,CAAC,OAAO;AAC5E,GACCC,OAAO,CAACH,CAAAA,OAAQ;IACf,MAAMI,QAAQtB,QAAQC,KAAKsB,IAAI,CAACd,WAAWS,OAAOP,WAAWT,UAAUsB,SAAS;IAChFd,EAAE,CAACY,MAAMG,IAAI,CAAC,GAAGH;AACnB;AAEFI,OAAOC,IAAI,CAACjB,IAAIW,OAAO,CAACO,CAAAA,YAAa;IACnC,IAAIlB,EAAE,CAACkB,UAAU,CAACC,SAAS,EAAE;QAC3BnB,EAAE,CAACkB,UAAU,CAACC,SAAS,CAACnB;IAC1B,CAAC;AACH;AAEAA,GAAGC,SAAS,GAAGA;AACfD,GAAGR,SAAS,GAAGA;AAEf4B,OAAOC,OAAO,GAAGrB"}